(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var Bluebox=require("./../../lib/index");var C=require("./../../lib/components/C");var Image=Bluebox.Components.Image;var Text=Bluebox.Components.Text;var View=Bluebox.Components.View;var Animator=require("../../lib/animation/Animator");var sharedStyle={backgroundColor:"green",opacity:1,width:100,height:100,marginTop:5,marginBottom:5,marginLeft:5,marginRight:5};var sharedImageStyle={width:100,height:100};function Transition(start,end,opts,node){Animator.registerAbsoluteTransition(start,end,opts,node);node.isAnimating=true;return node}setTimeout(Animator._startAnimating,300);module.exports=View({},{backgroundColor:"red"},[View({isStatic:true},{height:300,justifyContent:"space-around",flexDirection:"row",backgroundColor:"black",opacity:1,alignItems:"center"},[View({isStatic:true},{height:100,backgroundColor:"green",flexGrow:1},[Text("a")]),View({isStatic:true},{height:100,backgroundColor:"red",color:"blue",flexGrow:4},[Text("a",{textAlign:"center",fontSize:50,fontWeight:"bold",fontFamily:"San Francisco"})]),View({isStatic:true},{height:100,backgroundColor:"blue",flexGrow:1},[Text("b")])]),View({},{flexDirection:"row"},[View({},{width:600,height:400,backgroundColor:"black",overflow:"hidden"},[View({},{flexDirection:"row",marginTop:20,marginLeft:20,marginRight:20,marginBottom:20},[View({},sharedStyle,[Text("foobar123",{fontStyle:"italic"})]),View({},sharedStyle,[Text("a")]),Transition({left:0},{left:500},{duration:1e3,easing:"linear"},View({},{left:0,top:0,width:100,height:100,marginTop:5,marginBottom:5,marginLeft:5,marginRight:5,backgroundColor:"blue",position:"absolute"},[Text("a")])),View({},sharedStyle,[Text("a")]),View({},sharedStyle,[Text("a")]),View({},sharedStyle,[Text("a")]),View({},sharedStyle,[Text("a")]),View({},sharedStyle,[Text("a")]),View({},sharedStyle,[Text("a")]),View({},sharedStyle,[Text("a")]),View({},sharedStyle,[Text("a")]),View({},sharedStyle,[Text("a")]),View({},sharedStyle,[Text("a")])]),View({},{flexDirection:"row",marginTop:20,marginLeft:20,marginRight:20,marginBottom:20},[Transition({left:0,top:0},{left:200,top:-200},{duration:3e3,easing:"ease-in"},View({},{position:"absolute",backgroundColor:"white",top:0,left:0,width:100,height:100},[Image({src:"images/foo.png"},sharedImageStyle)])),View({},sharedStyle,[Text("Text that might or might not wrap...")]),View({},sharedStyle,[Text("a")]),View({},{width:300,height:100,backgroundColor:"red",color:"white",marginTop:5,marginBottom:5,marginLeft:5,marginRight:5,opacity:.8},[Text("a")]),View({},sharedStyle,[Image({src:"images/foo.png"},sharedImageStyle)]),View({},sharedStyle,[Image({src:"images/foo.png"},sharedImageStyle)]),View({},sharedStyle,[Image({src:"images/foo.png"},sharedImageStyle)]),View({},{width:210,height:100,backgroundColor:"white",marginTop:5,marginBottom:5,marginLeft:5,marginRight:5,opacity:1},[])])]),View({},{backgroundColor:"blue",height:200,width:300,alignSelf:"center",marginLeft:50,flexWrap:"wrap",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},[View({},{backgroundColor:"white",marginTop:10,marginBottom:10,marginLeft:10,marginRight:10,width:100,height:10},[]),View({},{backgroundColor:"red",marginTop:10,marginBottom:10,marginLeft:10,marginRight:10,width:50,height:10},[]),View({},{backgroundColor:"white",marginTop:10,marginBottom:10,marginLeft:10,marginRight:10,width:20,height:10},[]),View({},{backgroundColor:"red",marginTop:10,marginBottom:10,marginLeft:10,marginRight:10,width:100,height:10},[]),View({},{backgroundColor:"white",marginTop:10,marginBottom:10,marginLeft:10,marginRight:10,width:50,height:10},[]),View({},{backgroundColor:"red",marginTop:10,marginBottom:10,marginLeft:10,marginRight:10,width:70,height:10},[]),View({},{backgroundColor:"white",marginTop:10,marginBottom:10,marginLeft:10,marginRight:10,width:100,height:10},[]),Transition({width:50},{width:200},{duration:2e3,easing:"ease-in"},View({},{backgroundColor:"red",marginTop:10,marginBottom:10,marginLeft:10,marginRight:10,width:50,height:10},[])),View({},{backgroundColor:"white",marginTop:10,marginBottom:10,marginLeft:10,marginRight:10,width:20,height:10},[]),View({},{backgroundColor:"red",marginTop:10,marginBottom:10,marginLeft:10,marginRight:10,width:100,height:10},[]),View({},{backgroundColor:"white",marginTop:10,marginBottom:10,marginLeft:10,marginRight:10,width:50,height:10},[]),View({},{backgroundColor:"red",marginTop:10,marginBottom:10,marginLeft:10,marginRight:10,width:70,height:10},[]),View({},{backgroundColor:"white",marginTop:10,marginBottom:10,marginLeft:10,marginRight:10,width:100,height:10},[]),View({},{backgroundColor:"red",marginTop:10,marginBottom:10,marginLeft:10,marginRight:10,width:70,height:10},[])])]),View({},{position:"absolute",top:10,left:100,right:100,bottom:10,opacity:.6,flexDirection:"column",justifyContent:"center",alignItems:"center"},[Transition({top:-100},{top:200},{duration:2e3,easing:"ease-in-elastic"},View({},{backgroundColor:"blue",left:0,right:0,top:100,height:300,position:"absolute",flexDirection:"row",alignItems:"flex-start"},[View({},{flexGrow:1,height:20,backgroundColor:"green",alignSelf:"center"},[]),View({},{flexGrow:2,height:20,backgroundColor:"red"},[]),View({},{flexGrow:1,height:100,backgroundColor:"green",flexDirection:"column"},[View({},{flexGrow:1,width:10,backgroundColor:"green"},[]),View({},{flexGrow:2,width:10,backgroundColor:"red"},[]),View({},{flexGrow:1,width:10,backgroundColor:"green"},[])])]))])])},{"../../lib/animation/Animator":5,"./../../lib/components/C":7,"./../../lib/index":17}],2:[function(require,module,exports){var Bluebox=require("./../../lib/index");var doms=[require("./CategoriesView")];var i=0;function continuousRendering(){Bluebox.renderFromTop(doms[0],document.getElementById("canvas"))}requestAnimationFrame(continuousRendering)},{"./../../lib/index":17,"./CategoriesView":1}],3:[function(require,module,exports){var toFloat32=require("./utils/toFloat32");module.exports=7e3},{"./utils/toFloat32":33}],4:[function(require,module,exports){module.exports=false},{}],5:[function(require,module,exports){"use strict";var Bluebox=require("../index");var __DEV__=require("../__DEV__");var keys=Object.keys;var isArray=Array.isArray;var registeredAbsoluteTransitions=[];var registeredAbsoluteSprings=[];var shallowClone=require("../utils/shallowClone");var ensureTreeCorrectness=require("../diff/ensureTreeCorrectness");var isInTree=require("../diff/isInTree");var easings=require("./_easings");function cloneWithEmptyChildren(node){var newNode=shallowClone(node);newNode.children=[];return newNode}function copyChildren(node,newNode){for(var i=0,l=node.children.length;i<l;i++){var child=node.children[i];newNode.children[i]=child;child.parent=newNode}}function cloneWithChildren(node){var newNode=cloneWithEmptyChildren(node);copyChildren(node,newNode);return newNode}function cloneWithClonedStyle(node){var newNode=shallowClone(node);newNode.style=shallowClone(newNode.style);return newNode}var recalculationQueue=[];function reconstructTreeForAnimation(node,skipAddToQueue){var currentNode=node;var children=currentNode.children;if(children){var newNode=cloneWithChildren(currentNode);var newNodeChildren=newNode.children;for(var i=0,l=newNodeChildren.length;i<l;i++){var newChild=newNodeChildren[i];if(newChild.isAnimating){var newRef=newChild.newRef;newNodeChildren[i]=reconstructTreeForAnimation(newRef,true,true);newChild.newRef=newNodeChildren[i];newNodeChildren[i].oldRef=currentNode.children[i];if(!skipAddToQueue){recalculationQueue.push(newNode.children[i])}}else if(newChild.isChildAnimating){newNodeChildren[i]=reconstructTreeForAnimation(newChild,skipAddToQueue||false)}currentNode.children[i].oldParent=currentNode;newNodeChildren[i].parent=newNode}return newNode}return node}function dereferenceObjects(node){var children=node.children;if(children){for(var i=0,l=children.length;i<l;i++){var child=children[i];if(child.isChildAnimating){dereferenceObjects(child);child.parent=null;child.oldParent=null;child.oldRef=null}else if(child.isAnimating&&child.oldRef){child.parent=null;child.oldParent=null;child.oldRef=null}child.oldParent=null}}node.oldRef=null;node.oldParent=null}var rootNode;var startTime=Date.now();function processTransitions(currentTime){for(var i=0,l=registeredAbsoluteTransitions.length;i<l;i++){var absoluteTransition=registeredAbsoluteTransitions[i];var node=absoluteTransition.node;var start=absoluteTransition.start;var end=absoluteTransition.end;var keys=absoluteTransition.keys;var opts=absoluteTransition.opts;var duration=opts.duration;var easing=opts.easing||"linear";var newNode=cloneWithClonedStyle(node);for(var j=0,l2=keys.length;j<l2;j++){var key=keys[j];newNode.style[key]=easings[easing](currentTime,start[key],end[key],duration)}node.newRef=newNode;absoluteTransition.node=node}}function addRootNode(){if(!rootNode){if(registeredAbsoluteTransitions.length){rootNode=registeredAbsoluteTransitions[0].node;while(rootNode.parent){rootNode=rootNode.parent}}}}function correctAnimationNodeReferences(newRootNode){for(var i=0,l=registeredAbsoluteTransitions.length;i<l;i++){var absoluteTransition=registeredAbsoluteTransitions[i];if(__DEV__){if(!isInTree(newRootNode,absoluteTransition.node.newRef)){console.warn("absolute transition node CANNOT be found in the tree");console.log(absoluteTransition.node.newRef)}}var newRef=absoluteTransition.node.newRef;absoluteTransition.node.newRef=null;absoluteTransition.node=newRef}}function onAnimate(){requestAnimationFrame(onAnimate);var currentTime=Date.now()-startTime;processTransitions(currentTime);addRootNode();if(__DEV__){ensureTreeCorrectness(rootNode)}var newRootNode=reconstructTreeForAnimation(rootNode,false);if(__DEV__){ensureTreeCorrectness(newRootNode)}correctAnimationNodeReferences(newRootNode);if(__DEV__){for(var i=0,l=recalculationQueue.length;i<l;i++){var recalcNode=recalculationQueue[i];if(!isInTree(newRootNode,recalcNode)){console.warn("recalc node not found in the tree!")}}}Bluebox.relayout(newRootNode,recalculationQueue);dereferenceObjects(rootNode);rootNode=newRootNode;recalculationQueue=[];if(__DEV__){ensureTreeCorrectness(rootNode)}}var ViewPortHelper=require("../renderers/DOM/ViewPortHelper");var viewPortDimensions=ViewPortHelper.getDimensions();var clipSpaceX=1/viewPortDimensions.width*2;var clipSpaceY=1/viewPortDimensions.height*2;var Animator={isAnimating:false,registerAbsoluteTransition:function(start,end,opts,node){var isPositionalChange=false;var isInnerChange=false;var animationProperties=keys(start);if("left"in start&&!("right"in start)||"right"in start&&!("left"in start)||"top"in start&&!("bottom"in start)||"bottom"in start&&!("top"in start)){isPositionalChange=true}if(isPositionalChange){for(var i=0,l=animationProperties.length;i<l;i++){var prop=animationProperties[i];if(prop!=="left"&&prop!=="right"&&prop!=="top"&&prop!=="bottom"){isPositionalChange=false}}}if(start.left){start.left*=clipSpaceX}if(start.right){start.right*=clipSpaceX}if(start.width){start.width*=clipSpaceX}if(start.top){start.top*=clipSpaceY}if(start.bottom){start.bottom*=clipSpaceY}if(start.height){start.height*=clipSpaceY}if(end.left){end.left*=clipSpaceX}if(end.right){end.right*=clipSpaceX}if(end.width){end.width*=clipSpaceX}if(end.top){end.top*=clipSpaceY}if(end.bottom){end.bottom*=clipSpaceY}if(end.height){end.height*=clipSpaceY}registeredAbsoluteTransitions.push({keys:keys(start),start:start,end:end,opts:opts,node:node,startTime:Date.now(),isPositionalChange:isPositionalChange})},registerRelativeTransition:function(){},registerSpring:function(){},_startAnimating:function(){if(!Animator.isAnimating){Animator.isAnimating=true;requestAnimationFrame(onAnimate)}}};module.exports=Animator},{"../__DEV__":4,"../diff/ensureTreeCorrectness":13,"../diff/isInTree":14,"../index":17,"../renderers/DOM/ViewPortHelper":22,"../utils/shallowClone":32,"./_easings":6}],6:[function(require,module,exports){var easings={linear:function(t,b,_c,d){var c=_c-b;var result=t*c/d+b;if(t>d){result=_c}return result},"ease-in":function(t,b,_c,d){var c=_c-b;var _t=t/d;var result=c*_t*_t+b;if(t>d){result=_c}return result},"ease-in-elastic":function(t,b,_c,d){if(t>d){return _c}var c=_c-b;var s=1.70158;var p=0;var a=c;if(t==0){return b}if((t/=d)==1){return b+c}if(!p){p=d*.3}if(a<Math.abs(c)){a=c;var s=p/4}else{var s=p/(2*Math.PI)*Math.asin(c/a)}return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b}};module.exports=easings},{}],7:[function(require,module,exports){"use strict";var merge=require("../utils/merge");var UNDEFINED=require("../UNDEFINED");var __DEV__=require("../__DEV__");var ViewPortHelper=require("../renderers/DOM/ViewPortHelper");var toFloat32=require("../utils/toFloat32");var seal=Object.seal;var viewPortDimensions=ViewPortHelper.getDimensions();var clipSpaceX=toFloat32(1/viewPortDimensions.width*2);var clipSpaceY=toFloat32(1/viewPortDimensions.height*2);function convertToClipSpace(style){if(style.width!==UNDEFINED){style.width*=clipSpaceX}if(style.height!==UNDEFINED){style.height*=clipSpaceY}if(style.top!==UNDEFINED){style.top*=clipSpaceY}if(style.left!==UNDEFINED){style.left*=clipSpaceX}if(style.right!==UNDEFINED){style.right*=clipSpaceX}if(style.bottom!==UNDEFINED){style.bottom*=clipSpaceY}if(style.marginLeft!==0){style.marginLeft*=clipSpaceX}if(style.marginRight!==0){style.marginRight*=clipSpaceX}if(style.marginTop!==0){style.marginTop*=clipSpaceY}if(style.marginBottom!==0){style.marginBottom*=clipSpaceY}}function Component(type,props,style,children){var component={customType:null,layout:new Float32Array(7),style:merge({backgroundColor:"",color:"",margin:"",marginLeft:toFloat32(0),marginRight:toFloat32(0),marginTop:toFloat32(0),marginBottom:toFloat32(0),minHeight:toFloat32(0),minWidth:toFloat32(0),padding:"",paddingLeft:toFloat32(0),paddingRight:toFloat32(0),paddingTop:toFloat32(0),paddingBottom:toFloat32(0),opacity:1,overflow:"inherit",width:UNDEFINED,height:UNDEFINED,justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column",alignSelf:"",flexGrow:0,flexWrap:"nowrap",left:UNDEFINED,top:UNDEFINED,right:UNDEFINED,bottom:UNDEFINED,position:"relative",fontSize:12,fontFamily:"Arial",textAlign:"left",fontWeight:"",fontStyle:"normal"},style||{}),parent:null,oldParent:null,oldRef:null,type:type,props:props,children:children,lineIndex:0,isAnimating:false,isChildAnimating:0,newRef:null,nrOfVertices:1,depth:0};if(__DEV__){seal(component);seal(component.layout);seal(component.style)}var depth=0;for(var i=0,l=children.length;i<l;i++){var child=children[i];if(child.type){child.parent=component;if(!component.isChildAnimating&&(child.isAnimating||child.isChildAnimating)){component.isChildAnimating++}component.nrOfVertices+=child.nrOfVertices;if(child.depth>depth){depth=child.depth}}}convertToClipSpace(component.style);component.depth=1+depth;return component}module.exports=Component},{"../UNDEFINED":3,"../__DEV__":4,"../renderers/DOM/ViewPortHelper":22,"../utils/merge":31,"../utils/toFloat32":33}],8:[function(require,module,exports){"use strict";var ComponentConstants={LEFT:0,WIDTH:1,RIGHT:2,TOP:3,HEIGHT:4,BOTTOM:5,LINE_INDEX:6};module.exports=ComponentConstants},{}],9:[function(require,module,exports){"use strict";var Bluebox=require("./../../lib/index");var C=require("./C");var Image=Bluebox.create("image",function render(props,style,children){props.isLoaded=false;return C("image",props,style,[])});module.exports=Image},{"./../../lib/index":17,"./C":7}],10:[function(require,module,exports){"use strict";var Bluebox=require("./../../lib/index");var C=require("./C");var Text=Bluebox.create("text",function(props,style,children){return C("text",{},style,[props])});module.exports=Text},{"./../../lib/index":17,"./C":7}],11:[function(require,module,exports){"use strict";var Bluebox=require("./../../lib/index");var C=require("./C");var View=Bluebox.create("view",function render(props,style,children){return C("view",props,style,children||[])});module.exports=View},{"./../../lib/index":17,"./C":7}],12:[function(require,module,exports){"use strict";var EventHandling=require("../events/EventHandling");var isArray=Array.isArray;var keys=Object.keys;var BIG_ARRAY=100;function createKeyMap(children){var keyMap={};if(children){for(var i=0,l=children.length;i<l;i++){var child=children[i];var key=child.props?child.props.key:null;if(key){keyMap[key]=child}}}return keyMap}function diffArray(newNode,oldNode,parent,oldParent){var isDifferent=false;for(var i=0,l=newNode.length;i<l;i++){var oldNodeChild=oldNode[i];var difference=diff(newNode[i],oldNodeChild,parent,oldParent);if(oldNodeChild!==difference){newNode[i]=difference;isDifferent=true}}return isDifferent}function diffFunction(newNode,oldNode){var isDifferent=false;if(newNode.toString()!==oldNode.toString()){isDifferent=true}return isDifferent}function handleChildItem(oldNode,newValue,k,oldValue,isDifferent,skipKeys,keyMap,newNode){var oldNodeChildren=oldNode.children;var key=newValue[k].props?newValue[k].props.key:null;var difference2;if(key&&keyMap[key]){difference2=diff(newValue[k],keyMap[key])}else{difference2=diff(newValue[k],oldNodeChildren?oldNodeChildren[k]:null,newNode,oldNode)}if(!oldValue||oldValue[k]!==difference2){isDifferent=true}newNode.children[k]=difference2;return{isDifferent:isDifferent,skipKeys:skipKeys}}function handleProperty(newNode,oldNode,newNodeKeys,i,isDifferent,parent,oldParent){var key=newNodeKeys[i];if(key!=="layout"&&key!=="parentReference"){var newValue=newNode[key];var oldValue=oldNode[key];if(newNode.props){EventHandling.setEventListeners(newNode,oldNode)}if(key==="children"&&isArray(newValue)){if(!oldValue){isDifferent=true;return{isDifferent:isDifferent}}var keyMap=createKeyMap(oldValue);var skipKeys=false;for(var k=0,j=newValue.length;k<j;k++){var __ret=handleChildItem(oldNode,newValue,k,oldValue,isDifferent,skipKeys,keyMap,newNode);isDifferent=__ret||isDifferent;skipKeys=__ret.skipKeys}}else{var difference3=diff(newValue,oldValue,newNode,oldNode);newNode[key]=difference3;if(difference3!==oldValue){isDifferent=true}}}return isDifferent}function diffObject(newNode,oldNode,parent,oldParent){var isDifferent=false;var newNodeKeys=keys(newNode);var newNodeKeysLength=newNodeKeys.length;var oldNodeKeysLength=keys(oldNode).length;if(newNodeKeysLength!==oldNodeKeysLength){isDifferent=true}for(var i=0;i<newNodeKeysLength;i++){isDifferent=handleProperty(newNode,oldNode,newNodeKeys,i,isDifferent,parent,oldParent)||isDifferent}return isDifferent}function diff(newNode,oldNode,parent,oldParent){var isDifferent=false;if(newNode===oldNode){return oldNode}if(!oldNode||!newNode){if(newNode&&newNode.props){EventHandling.setEventListeners(newNode,oldNode)}return newNode}var newNodeType=typeof newNode;var oldNodeType=typeof oldNode;if(newNodeType!==oldNodeType){isDifferent=true;return newNode}if(isDifferent){return newNode}if(isArray(newNode)){isDifferent=diffArray(newNode,oldNode,parent,oldParent)||isDifferent}else if(newNodeType==="object"){isDifferent=diffObject(newNode,oldNode,parent,oldParent)||isDifferent}else if(newNodeType==="function"){isDifferent=diffFunction(newNode,oldNode,parent,oldParent)||isDifferent}else if(newNode!==oldNode){isDifferent=true}var returnNode=isDifferent?newNode:oldNode;if(returnNode&&returnNode.props&&returnNode.props.style){var style=returnNode.props.style;if(style.display==="none"&&returnNode.children&&returnNode.children.length){returnNode.children=[]}}return returnNode}module.exports=diff},{"../events/EventHandling":15}],13:[function(require,module,exports){"use strict";function ensureTreeCorrectness(node){var children=node.children;for(var i=0,l=children.length;i<l;i++){var child=children[i];if(child.type){if(child.parent!==node){console.warn("PARENT CHILD MISMATCH");return false}if(child.newRef){console.warn("NEWREF LEAK FOUND");return false}return ensureTreeCorrectness(child)}}return true}module.exports=ensureTreeCorrectness},{}],14:[function(require,module,exports){"use strict";function isInTree(rootNode,item){if(rootNode===item){return true}var children=rootNode.children;if(children){for(var i=0,l=children.length;i<l;i++){if(isInTree(children[i],item)){return true}}}return false}module.exports=isInTree},{}],15:[function(require,module,exports){"use strict";var handleEvents=require("../events/handleEvents");var handleEvent=handleEvents.handleEvent;function handleEventProperty(newComponent,oldComponent,key,fn){if(key==="onClick"||key==="onMouseEnter"||key==="onMouseLeave"||key==="onKeyUp"||key==="onKeyPress"){if(!oldComponent){handleEvents.addEventListener(newComponent,key,handleEvents.handleEvent(fn))}else if(oldComponent!==newComponent){handleEvents.updateComponents(oldComponent,newComponent)}else if(oldComponent&&!newComponent){console.warn("TODO: remove event listeners for this and also the children...")}}}function setEventListeners(node,oldNode){if(node.props.onClick){handleEventProperty(node,oldNode,"onClick",node.props.onClick)}if(node.props.onKeyUp){handleEventProperty(node,oldNode,"onKeyUp",node.props.onKeyUp)}if(node.props.onMouseEnter){handleEventProperty(node,oldNode,"onMouseEnter",node.props.onMouseEnter)}if(node.props.onMouseLeave){handleEventProperty(node,oldNode,"onMouseLeave",node.props.onMouseLeave)}if(node.children){for(var i=0,l=node.children.length;i<l;i++){var child=node.children[i];if(typeof child!=="string"){setEventListeners(node.children[i],oldNode?oldNode.children[i]:null)}}}}module.exports={setEventListeners:setEventListeners}},{"../events/handleEvents":16}],16:[function(require,module,exports){"use strict";var attachedEventListeners={onClick:[],onKeyUp:[],onMouseEnter:[],onMouseMove:[],onMouseLeave:[]};var map={onClick:"click",onKeyUp:"keyup",onMouseMove:"mousemove"};function addEventListener(component,event,fn){if((event==="onMouseEnter"||event==="onMouseLeave")&&!attachedEventListeners.onMouseMove.length){document.addEventListener("mousemove",handleMouseMove(component))}else if(!attachedEventListeners[event].length){document.addEventListener(map[event],handleEvents2(component,event))}attachedEventListeners[event].push({component:component,fn:fn})}var mouseLeaveComponent=null;function handleMouseMove(component,fn){return function(e){if(mouseLeaveComponent&&mouseLeaveComponent.component.props.onMouseLeave&&!(e.clientY>=mouseLeaveComponent.component.layout.top&&e.clientY<=mouseLeaveComponent.component.layout.top+mouseLeaveComponent.component.layout.height&&e.clientX>=mouseLeaveComponent.component.layout.left&&e.clientX<=mouseLeaveComponent.component.layout.left+mouseLeaveComponent.component.layout.width)){mouseLeaveComponent.component.props.onMouseLeave(mouseLeaveComponent.component,e);mouseLeaveComponent=null}var mouseEnterComponents=attachedEventListeners.onMouseEnter;for(var i=0,l=mouseEnterComponents.length;i<l;i++){var mouseEnterComponent=mouseEnterComponents[i];if(mouseLeaveComponent!==mouseEnterComponent){if(e.clientY>=mouseEnterComponent.component.layout.top&&e.clientY<=mouseEnterComponent.component.layout.top+mouseEnterComponent.component.layout.height&&e.clientX>=mouseEnterComponent.component.layout.left&&e.clientX<=mouseEnterComponent.component.layout.left+mouseEnterComponent.component.layout.width){mouseEnterComponent.fn(mouseEnterComponent.component,e);mouseLeaveComponent=mouseEnterComponent}}}}}function handleEvents2(component,type){return function(e){var listeners=attachedEventListeners[type];for(var i=0,l=listeners.length;i<l;i++){var listener=listeners[i];listener.fn(listener.component,e)}}}function handleEvent(fn){return function(component,e){if(e instanceof MouseEvent){if(e.clientY>component.layout.top&&e.clientY<component.layout.bottom&&e.clientX>component.layout.left&&e.clientX<component.layout.right){fn(component,e)}}if(e instanceof KeyboardEvent){fn(component,e)}}}function handleEvents(component){var props=component.props;if(props.onClick){addEventListener(component,"click",handleEvent(component,props.onClick))}if(props.onMouseEnter){addEventListener(component,"mouseenter",props.onMouseEnter)}if(props.onKeyPress){addEventListener(component,"keypress",handleEvent(component,props.onKeyPress))}if(props.onKeyUp){addEventListener(component,"keyup",handleEvent(component,props.onKeyUp))}}function updateComponents(oldComponent,newComponent){var onClickListeners=attachedEventListeners.onClick;for(var i=0,l=onClickListeners.length;i<l;i++){var onClickListener=onClickListeners[i];if(onClickListener.component===oldComponent){onClickListener.component=newComponent}}var onKeyUpListeners=attachedEventListeners.onKeyUp;for(var i=0,l=onKeyUpListeners.length;i<l;i++){var onKeyUpListener=onKeyUpListeners[i];if(onKeyUpListener.component===oldComponent){onKeyUpListener.component=newComponent}}}module.exports={handleEvents:handleEvents,addEventListener:addEventListener,handleEvent:handleEvent,updateComponents:updateComponents}},{}],17:[function(require,module,exports){"use strict";var diff=require("./diff/diff");var LayoutEngine=require("./layout/LayoutEngine");var render=require("./renderers/GL/render");var ViewPortHelper=require("./renderers/DOM/ViewPortHelper");var requestStyleRecalculation=require("./layout/requestStyleRecalculation");var ensureTreeCorrectness=require("./diff/ensureTreeCorrectness");var oldComponentTree=null;var oldDOMElement=null;var viewPortDimensions=null;var registeredComponentTypes={};var AXIS=require("./layout/AXIS");var AXIS2=require("./layout/AXIS2");var keys=Object.keys;function registerComponentType(type,structure){registeredComponentTypes[type]=structure}function rerenderComponent(type,props,style,children){var componentType=registeredComponentTypes[type];return componentType(props,style,children)}function clone(obj){var newObj={};var properties=keys(obj);for(var i=0,l=properties.length;i<l;i++){var property=properties[i];newObj[property]=obj[property]}return newObj}function updateTree(component,newComponent){var parent=component.parent;if(parent){newComponent.layout=component.layout;while(parent){var index=parent.children.indexOf(component);var newParent=clone(parent);newParent.children[index]=newComponent;newComponent.parent=newParent;if(!component.parent){return newComponent}newComponent=newComponent.parent;component=component.parent;parent=component.parent}return newComponent}else{return newComponent}}function mergeProperties(newProps,existingProps){var existingPropKeys=keys(existingProps);for(var i=0,l=existingPropKeys.length;i<l;i++){var existingPropKey=existingPropKeys[i];if(!newProps[existingPropKey]){newProps[existingPropKey]=existingProps[existingPropKey]}}return newProps}function withProperties(component){return{withProperties:function(props){var newProps=mergeProperties(props,component.props);var newComponent=rerenderComponent(component.customType,newProps,component.style,component.children);var newComponentTree=updateTree(component,newComponent);Bluebox.renderFromTop(newComponentTree);newComponent.customType=component.customType;return newComponent}}}var Bluebox={create:function(type,structure){registerComponentType(type,structure);return function(props,style,children){var component=structure(props,style,children);component.customType=type;return component}},Components:{Image:null,Text:null,View:null},Animations:{Transition:null,Spring:null},update:function(component){return withProperties(component)},renderOnly:function(c){render(oldDOMElement,c,null,viewPortDimensions)},renderFromTop:function(componentTree,domElement,noDiff){if(!componentTree){componentTree=oldComponentTree}if(!domElement){domElement=oldDOMElement}oldDOMElement=domElement;var newComponentTree=noDiff?componentTree:diff(componentTree,oldComponentTree,null,null);var hasChanged=false;if(viewPortDimensions!==ViewPortHelper.getDimensions()){viewPortDimensions=ViewPortHelper.getDimensions();hasChanged=true}newComponentTree=LayoutEngine.layoutRelativeNode(newComponentTree,null,null,AXIS.column,AXIS.row,AXIS2.column,AXIS2.row,false);console.log(newComponentTree);if(newComponentTree!==oldComponentTree||hasChanged){viewPortDimensions=ViewPortHelper.getDimensions()}render(domElement,newComponentTree,null,0,viewPortDimensions,false,false);oldComponentTree=newComponentTree;return newComponentTree},relayout:function(componentTree,changedLayoutNodes){var optimizedQueue=[];var i,l;for(i=0,l=changedLayoutNodes.length;i<l;i++){var node=requestStyleRecalculation(changedLayoutNodes[i],changedLayoutNodes[i].oldRef);if(optimizedQueue.indexOf(node)===-1){optimizedQueue.push(node)}}var domElement=oldDOMElement;for(i=0,l=optimizedQueue.length;i<l;i++){var changedLayoutNode=optimizedQueue[i];var mainAxis=changedLayoutNode.parent?AXIS[changedLayoutNode.parent.style.flexDirection]:AXIS.column;var crossAxis=mainAxis===AXIS.column?AXIS.row:AXIS.column;var mainAxis2=changedLayoutNode.parent?AXIS2[changedLayoutNode.parent.style.flexDirection]:AXIS2.column;var crossAxis2=mainAxis===AXIS.column?AXIS2.row:AXIS2.column;var parent=changedLayoutNode.parent;var previousSibling=null;if(parent){var index=parent.children.indexOf(changedLayoutNode);if(index>0){previousSibling=parent.children[index-1]}}LayoutEngine.layoutRelativeNode(changedLayoutNode,changedLayoutNode.oldRef,previousSibling,mainAxis,crossAxis,mainAxis2,crossAxis2,false,false)}render(domElement,componentTree,oldComponentTree,0,viewPortDimensions,false,false);oldComponentTree=componentTree;return componentTree}};module.exports=Bluebox;Bluebox.Components.View=require("./components/View");Bluebox.Components.Text=require("./components/Text");Bluebox.Components.Image=require("./components/Image");Bluebox.Animations.Transition=function(){};Bluebox.Animations.Spring=function(){}},{"./components/Image":9,"./components/Text":10,"./components/View":11,"./diff/diff":12,"./diff/ensureTreeCorrectness":13,"./layout/AXIS":18,"./layout/AXIS2":19,"./layout/LayoutEngine":20,"./layout/requestStyleRecalculation":21,"./renderers/DOM/ViewPortHelper":22,"./renderers/GL/render":27}],18:[function(require,module,exports){var AXIS={row:{START:"left",END:"right",DIMENSION:"width",MARGIN_LEADING:"marginLeft",MARGIN_TRAILING:"marginRight",PADDING_LEADING:"paddingLeft",PADDING_TRAILING:"paddingRight"},column:{START:"top",END:"bottom",DIMENSION:"height",MARGIN_LEADING:"marginTop",MARGIN_TRAILING:"marginBottom",PADDING_LEADING:"paddingTop",PADDING_TRAILING:"paddingBottom"}};module.exports=AXIS},{}],19:[function(require,module,exports){"use strict";var AXIS={row:{START:0,END:2,DIMENSION:1},column:{START:3,END:5,DIMENSION:4}};module.exports=AXIS},{}],20:[function(require,module,exports){"use strict";var __DEV__=require("../__DEV__");var COLUMN="column";var ROW="row";var FLEX_START="flex-start";var FLEX_END="flex-end";var SPACE_AROUND="space-around";var SPACE_BETWEEN="space-between";var ABSOLUTE="absolute";var STRETCH="stretch";var LEFT="left";var TOP="top";var RIGHT="right";var BOTTOM="bottom";var CENTER="center";var AXIS=require("./AXIS");var AXIS2=require("./AXIS2");var WRAP="wrap";var UNDEFINED=require("../UNDEFINED");var ViewPortHelper=require("../renderers/DOM/ViewPortHelper");var CL=require("../components/ComponentConstants");var viewPortDimensions=ViewPortHelper.getDimensions();var toFloat32=require("../utils/toFloat32");var clipSpaceX=toFloat32(1/viewPortDimensions.width*2);var clipSpaceY=toFloat32(1/viewPortDimensions.height*2);var clientWidth=toFloat32(document.body.clientWidth)*clipSpaceX;var clientHeight=toFloat32(document.body.clientHeight)*clipSpaceY;function justifyContentFn(child,previousChild,mainAxis,mainAxis2,justifyContentX,remainingSpaceMainAxis,parentHeight,parentWidth,isPositionAbsolute){var justifyContent=justifyContentX;
if(justifyContent===CENTER){justifyContent=FLEX_END}var childLayout=child.layout;var childStyle=child.style;if(isPositionAbsolute&&(childStyle[mainAxis.START]!==UNDEFINED||childStyle[mainAxis.END]!==UNDEFINED)){return}if(justifyContent===FLEX_END){childLayout[mainAxis2.START]+=remainingSpaceMainAxis;childLayout[mainAxis2.END]+=remainingSpaceMainAxis}else if(justifyContent===SPACE_AROUND){if(!previousChild){childLayout[mainAxis2.START]+=remainingSpaceMainAxis+childStyle[mainAxis.MARGIN_LEADING]}else{childLayout[mainAxis2.START]=previousChild.layout[mainAxis2.END]+childStyle[mainAxis.MARGIN_LEADING]+remainingSpaceMainAxis*2}childLayout[mainAxis2.END]=childLayout[mainAxis2.START]+childLayout[mainAxis2.DIMENSION]}else if(justifyContent===SPACE_BETWEEN&&previousChild){childLayout[mainAxis2.START]=previousChild.layout[mainAxis2.END]+remainingSpaceMainAxis+previousChild.style[mainAxis.MARGIN_TRAILING]+childStyle[mainAxis.MARGIN_LEADING];childLayout[mainAxis2.END]=childLayout[mainAxis2.START]+childLayout[mainAxis2.DIMENSION]}else if(justifyContent===STRETCH){if(childLayout[mainAxis2.DIMENSION]===0){childLayout[mainAxis2.START]=0;childLayout[mainAxis2.DIMENSION]=mainAxis===AXIS.row?parentWidth:parentHeight;childLayout[mainAxis2.END]=childLayout[mainAxis2.DIMENSION]}}}function absolutePosition(node,previousSibling,mainAxis,crossAxis,mainAxis2,crossAxis2){var parent=node.parent;var nodeLayout=node.layout;var nodeStyle=node.style;var parentLayout=parent.layout;nodeLayout[mainAxis2.START]=parentLayout[mainAxis2.START];nodeLayout[crossAxis2.START]=parentLayout[crossAxis2.START];if(nodeStyle[mainAxis.START]!==UNDEFINED){nodeLayout[mainAxis2.START]+=nodeStyle[mainAxis.START];nodeLayout[mainAxis2.END]+=nodeStyle[mainAxis.START]}else if(nodeStyle[mainAxis.END]!==UNDEFINED&&nodeStyle[mainAxis.DIMENSION]!==UNDEFINED){nodeLayout[mainAxis2.START]=parentLayout[mainAxis2.END]-nodeStyle[mainAxis.DIMENSION]-nodeStyle[mainAxis.END]}else if(previousSibling){nodeLayout[mainAxis2.START]=previousSibling.layout[mainAxis2.END]+previousSibling.style[mainAxis.MARGIN_TRAILING]}if(nodeStyle[crossAxis.START]!==UNDEFINED){nodeLayout[crossAxis2.START]+=nodeStyle[crossAxis.START];nodeLayout[crossAxis2.END]+=nodeStyle[crossAxis.START]}else if(nodeStyle[crossAxis.END]!==UNDEFINED&&nodeStyle[crossAxis.DIMENSION]!==UNDEFINED){nodeLayout[crossAxis2.START]=parentLayout[crossAxis2.END]-nodeStyle[crossAxis.DIMENSION]-nodeStyle[crossAxis.END]}else{nodeLayout[crossAxis2.START]=parent?parentLayout[crossAxis2.START]:0}if(nodeStyle[mainAxis.END]!==UNDEFINED){nodeLayout[mainAxis2.END]=parentLayout[mainAxis2.END]-nodeStyle[mainAxis.END];nodeLayout[mainAxis2.DIMENSION]=nodeLayout[mainAxis2.END]-nodeLayout[mainAxis2.START]}if(nodeStyle[crossAxis.END]!==UNDEFINED){nodeLayout[crossAxis2.END]=parentLayout[crossAxis2.END]-nodeStyle[crossAxis.END];nodeLayout[crossAxis2.DIMENSION]=nodeLayout[crossAxis2.END]-nodeLayout[crossAxis2.START]}if(!nodeLayout[CL.HEIGHT]&&nodeStyle.height!==UNDEFINED){nodeLayout[CL.HEIGHT]=nodeStyle.height}if(!nodeLayout[CL.WIDTH]&&nodeStyle.width!==UNDEFINED){nodeLayout[CL.WIDTH]=nodeStyle.width}if(nodeLayout[CL.WIDTH]<nodeLayout[CL.BOTTOM]-nodeLayout[CL.TOP]){nodeLayout[CL.BOTTOM]=nodeLayout[CL.TOP]+nodeLayout[CL.HEIGHT]}if(nodeLayout[CL.WIDTH]<nodeLayout[CL.RIGHT]-nodeLayout[CL.LEFT]){nodeLayout[CL.RIGHT]=nodeLayout[CL.LEFT]+nodeLayout[CL.WIDTH]}}function alignItemsFn(child,previousChild,mainAxis,mainAxis2,alignItems,remainingSpaceMainAxis,parentHeight,parentWidth,isPositionAbsolute){justifyContentFn(child,previousChild,mainAxis,mainAxis2,alignItems,remainingSpaceMainAxis,parentHeight,parentWidth,isPositionAbsolute)}function correctChildren(node,oldNode,top,left,mainAxis,crossAxis,mainAxis2,crossAxis2){var previousChild=null;for(var i=0,l=node.children.length;i<l;i++){var child=node.children[i];var childStyle=child.style;var childLayout=child.layout;if(child.children){var isAbsolutePosition=childStyle.position===ABSOLUTE;if(isAbsolutePosition){absolutePosition(child,previousChild,mainAxis,crossAxis,mainAxis2,crossAxis2)}else{childLayout[CL.LEFT]+=left;childLayout[CL.RIGHT]+=left;childLayout[CL.TOP]+=top;childLayout[CL.BOTTOM]+=top;correctChildren(child,oldNode,top,left,mainAxis,crossAxis,mainAxis2,crossAxis2)}previousChild=child}}}function flexSize(child,previousChild,totalFlexGrow,remainingSpaceMainAxis,mainAxis){var childLayout=child.layout;var childStyle=child.style;if(mainAxis===ROW){if(previousChild){childLayout[CL.LEFT]=previousChild.layout[CL.RIGHT]}childLayout[CL.WIDTH]=childStyle.flexGrow/totalFlexGrow*remainingSpaceMainAxis+(childStyle.width!==UNDEFINED?childStyle.width:0);childLayout[CL.RIGHT]=childLayout[CL.LEFT]+childLayout[CL.WIDTH]}else{if(previousChild){childLayout[CL.TOP]=previousChild.layout[CL.BOTTOM]}childLayout[CL.HEIGHT]=childStyle.flexGrow/totalFlexGrow*remainingSpaceMainAxis+(childStyle.height!==UNDEFINED?childStyle.height:0);childLayout[CL.BOTTOM]=childLayout[CL.TOP]+childLayout[CL.HEIGHT]}}function hasPositionChanged(node,oldNode){return!(node.style.left===oldNode.style.left&&node.style.right===oldNode.style.right&&node.style.top===oldNode.style.top)}var arrays=[];function getArray(){if(arrays.length===0){return[]}return arrays.shift()}function releaseArray(array){array.length=0;arrays.push(array)}function processChildren(node,oldNode,parentMainAxis,parentCrossAxis,parentMainAxis2,parentCrossAxis2,shouldProcessAbsolute,hasParentDimensionsChanged,offsetX,offsetY){var parent=node.parent;var nodeStyle=node.style;if(oldNode){if(node.style!==oldNode.style){if(node.style.width!==oldNode.style.width||node.style.height!==oldNode.style.height){hasParentDimensionsChanged=true}}if(node.style.width!==UNDEFINED&&node.style.height!==UNDEFINED&&node.style.width===oldNode.style.width&&node.style.height===oldNode.style.height){hasParentDimensionsChanged=false}}var parentLayout=parent?parent.layout:null;var parentWidth=parentLayout?parentLayout[CL.WIDTH]:clientWidth;var parentHeight=parentLayout?parentLayout[CL.HEIGHT]:clientHeight;var nodeLayout=node.layout;var nodeChildren=node.children;if(nodeChildren.length&&typeof nodeChildren[0]!=="string"){var newMainAxisDirection=nodeStyle&&nodeStyle.flexDirection?nodeStyle.flexDirection:COLUMN;var newCrossAxisDirection=newMainAxisDirection===COLUMN?ROW:COLUMN;var mainAxis=AXIS[newMainAxisDirection];var crossAxis=AXIS[newCrossAxisDirection];var mainAxis2=AXIS2[newMainAxisDirection];var crossAxis2=AXIS2[newCrossAxisDirection];var maxSize=0;var previousChild=null;var totalFlexGrow=0;var lineIndex=0;var isFlexWrap=nodeStyle.flexWrap===WRAP;var totalChildrenSize=0;var additional=0;var maxCrossDimension=0;var lineLengths=getArray();var crossLineLengths=getArray();var lineNrOfChildren=getArray();var currNrOfChildren=0;var child;var childStyle;var childLayout;var i;var l;var oldChild;var hasParentLocationChanged=oldNode&&hasPositionChanged(node,oldNode);for(i=0,l=nodeChildren.length;i<l;i++){child=nodeChildren[i];oldChild=oldNode?oldNode.children[i]:null;childStyle=child.style;childLayout=child.layout;layoutRelativeNode(child,oldChild,previousChild,mainAxis,crossAxis,mainAxis2,crossAxis2,shouldProcessAbsolute,hasParentDimensionsChanged);var skipPrevious=false;if(childStyle.position!==ABSOLUTE){if(i===0){childLayout[parentMainAxis2.START]+=nodeStyle[parentMainAxis.PADDING_LEADING];childLayout[parentMainAxis2.END]+=nodeStyle[parentMainAxis.PADDING_TRAILING]}childLayout[parentCrossAxis2.START]+=nodeStyle[parentCrossAxis.PADDING_LEADING];childLayout[parentCrossAxis2.DIMENSION]-=nodeStyle[parentCrossAxis.PADDING_LEADING]+nodeStyle[parentCrossAxis.PADDING_TRAILING];childLayout[parentCrossAxis2.END]-=nodeStyle[parentCrossAxis.PADDING_TRAILING];var newSize=childStyle[mainAxis.DIMENSION]!==UNDEFINED?childStyle[mainAxis.DIMENSION]+childStyle[crossAxis.MARGIN_LEADING]+childStyle[crossAxis.MARGIN_TRAILING]||0:0;if(isFlexWrap){if(totalChildrenSize+newSize>nodeLayout[mainAxis2.DIMENSION]){lineLengths.push(totalChildrenSize);crossLineLengths.push(maxCrossDimension);lineNrOfChildren.push(currNrOfChildren);lineIndex++;currNrOfChildren=0;additional+=maxCrossDimension;maxCrossDimension=0;childLayout[mainAxis2.START]=nodeLayout[mainAxis2.START]+childStyle[mainAxis.MARGIN_LEADING];childLayout[mainAxis2.END]=childLayout[mainAxis2.START]+childLayout[mainAxis2.DIMENSION];totalChildrenSize=0}childLayout[CL.LINE_INDEX]=lineIndex}currNrOfChildren++;totalChildrenSize+=newSize;childLayout[crossAxis2.START]+=additional;childLayout[crossAxis2.END]+=additional;if(childLayout[parentMainAxis2.END]>maxSize){maxSize=childLayout[parentMainAxis2.END]+childStyle[parentMainAxis.MARGIN_TRAILING]}totalFlexGrow+=childStyle.flexGrow;if(skipPrevious){previousChild=null}else{previousChild=child}if(childLayout[crossAxis2.DIMENSION]+childStyle[crossAxis.MARGIN_TRAILING]+childStyle[crossAxis.MARGIN_LEADING]>maxCrossDimension){maxCrossDimension=childLayout[crossAxis2.DIMENSION]+childStyle[crossAxis.MARGIN_TRAILING]+childStyle[crossAxis.MARGIN_LEADING]}}}additional+=maxCrossDimension;lineLengths.push(totalChildrenSize);crossLineLengths.push(maxCrossDimension);lineNrOfChildren.push(currNrOfChildren);if(node!==oldNode&&nodeLayout[parentMainAxis2.DIMENSION]===0){nodeLayout[parentMainAxis2.END]=maxSize+nodeStyle[parentMainAxis.PADDING_TRAILING];nodeLayout[parentMainAxis2.DIMENSION]=maxSize+nodeStyle[parentMainAxis.PADDING_TRAILING]-nodeLayout[parentMainAxis2.START]}var newParentHeight=nodeLayout[CL.HEIGHT];var newParentWidth=nodeLayout[CL.WIDTH];var mainDimensionSize=mainAxis===AXIS.row?newParentWidth:newParentHeight;var crossDimensionSize=mainAxis===AXIS.row?newParentHeight:newParentWidth;var justifyContent=nodeStyle.justifyContent;var alignItems=nodeStyle.alignItems;var remainingSpaceMainAxis;previousChild=null;var currentLineIndex=-1;var currCrossSize=0;for(i=0,l=nodeChildren.length;i<l;i++){child=nodeChildren[i];childStyle=child.style;childLayout=child.layout;oldChild=oldNode?oldNode.children[i]:null;if(currentLineIndex!==childLayout[CL.LINE_INDEX]){currentLineIndex=childLayout[CL.LINE_INDEX];remainingSpaceMainAxis=mainDimensionSize-lineLengths[currentLineIndex];if(!totalFlexGrow){if(justifyContent===CENTER){remainingSpaceMainAxis/=2}else if(justifyContent===SPACE_BETWEEN){remainingSpaceMainAxis/=lineNrOfChildren[currentLineIndex]-1;previousChild=null}else if(justifyContent===SPACE_AROUND){remainingSpaceMainAxis/=lineNrOfChildren[currentLineIndex]*2;previousChild=null}}currCrossSize+=lineLengths[currentLineIndex]}var isPositionAbsolute=childStyle.position===ABSOLUTE;var remainingSpaceCrossAxisSelf=crossDimensionSize-additional;var initialTop=childLayout[CL.TOP];var initialLeft=childLayout[CL.LEFT];if(totalFlexGrow){flexSize(child,previousChild,totalFlexGrow,remainingSpaceMainAxis,newMainAxisDirection)}else{justifyContentFn(child,previousChild,mainAxis,mainAxis2,justifyContent,remainingSpaceMainAxis,parentHeight,parentWidth,isPositionAbsolute)}if(isPositionAbsolute){absolutePosition(child,previousChild,mainAxis,crossAxis,mainAxis2,crossAxis2)}var alignSelf=(!isFlexWrap?childStyle.alignSelf:alignItems)||alignItems;var addSpace=crossLineLengths[currentLineIndex]-childLayout[crossAxis2.DIMENSION]-childStyle[crossAxis.MARGIN_TRAILING]-childStyle[crossAxis.MARGIN_LEADING];if(addSpace){remainingSpaceCrossAxisSelf+=addSpace}if(alignSelf===CENTER){remainingSpaceCrossAxisSelf=remainingSpaceCrossAxisSelf/2}alignItemsFn(child,previousChild,crossAxis,crossAxis2,alignSelf,remainingSpaceCrossAxisSelf,parentHeight,parentWidth,isPositionAbsolute);if(isPositionAbsolute){processChildren(child,oldChild,mainAxis,crossAxis,mainAxis2,crossAxis2,isPositionAbsolute,hasParentDimensionsChanged,offsetX,offsetY)}else if(childLayout[CL.TOP]-initialTop!==0||childLayout[CL.LEFT]-initialLeft!==0){correctChildren(child,oldChild,childLayout[CL.TOP]-initialTop,childLayout[CL.LEFT]-initialLeft,mainAxis,crossAxis,mainAxis2,crossAxis2)}if(!isPositionAbsolute){previousChild=child}}if(hasParentLocationChanged){correctChildren(node,oldNode,offsetY,offsetX,parentMainAxis,parentCrossAxis)}releaseArray(lineLengths);releaseArray(crossLineLengths);releaseArray(lineNrOfChildren)}}function layoutRelativeNode(node,oldNode,previousSibling,mainAxis,crossAxis,mainAxis2,crossAxis2,shouldProcessAbsolute,hasParentDimensionsChanged){var nodeLayout=node.layout;var nodeStyle=node.style;var oldNodeTop=0;var oldNodeLeft=0;if(oldNode){oldNodeTop=oldNode.layout[CL.TOP];oldNodeLeft=oldNode.layout[CL.LEFT]}var parent=node.parent;if(parent&&parent.style.position===ABSOLUTE&&!shouldProcessAbsolute){return node}if(node===oldNode&&!hasParentDimensionsChanged){return node}var parentLayout=parent?parent.layout:null;var parentWidth=parentLayout?parentLayout[CL.WIDTH]:clientWidth;if(previousSibling&&nodeStyle.position!==ABSOLUTE){nodeLayout[mainAxis2.START]=previousSibling.layout[mainAxis2.END]+previousSibling.style[mainAxis.MARGIN_TRAILING];nodeLayout[crossAxis2.START]=parentLayout[crossAxis2.START]}else{nodeLayout[CL.LEFT]=parent?parentLayout[CL.LEFT]:0;nodeLayout[CL.TOP]=parent?parentLayout[CL.TOP]:0}nodeLayout[CL.LEFT]+=nodeStyle.marginLeft;nodeLayout[CL.TOP]+=nodeStyle.marginTop;nodeLayout[CL.WIDTH]=(nodeStyle.width!==UNDEFINED?nodeStyle.width:0)||(!nodeStyle.flexGrow?parentWidth:0)||0;nodeLayout[CL.HEIGHT]=nodeStyle.height!==UNDEFINED?nodeStyle.height:0;nodeLayout[CL.BOTTOM]=nodeLayout[CL.TOP]+nodeLayout[CL.HEIGHT];nodeLayout[CL.RIGHT]=nodeLayout[CL.LEFT]+nodeLayout[CL.WIDTH];if(nodeStyle.position!==ABSOLUTE){processChildren(node,oldNode,mainAxis,crossAxis,mainAxis2,crossAxis2,false,hasParentDimensionsChanged,oldNodeLeft-node.layout[CL.LEFT],oldNodeTop-node.layout[CL.TOP])}return node}function layoutAbsoluteNode(node,oldNode,previousSibling,mainAxis,crossAxis){absolutePosition(node,previousSibling,mainAxis,crossAxis);processChildren(node,oldNode,mainAxis,crossAxis,true)}module.exports={layoutRelativeNode:layoutRelativeNode}},{"../UNDEFINED":3,"../__DEV__":4,"../components/ComponentConstants":8,"../renderers/DOM/ViewPortHelper":22,"../utils/toFloat32":33,"./AXIS":18,"./AXIS2":19}],21:[function(require,module,exports){"use strict";var __DEV__=require("../__DEV__");var UNDEFINED=require("../UNDEFINED");function requestStyleRecalculation(node,oldNode){var currentNode=node;var currentOldNode=oldNode;var requireStyleRecalculation=true;while(requireStyleRecalculation){requireStyleRecalculation=false;var parent=currentNode.parent;var oldParent=currentOldNode.oldParent||currentOldNode.parent;if(__DEV__){if(parent&&parent===oldParent){console.warn("new parent shouldn't be equal to old parent")}}var nodeStyle=currentNode.style;var oldNodeStyle=currentOldNode.style;if(parent&&(nodeStyle.position==="absolute"||parent.style.flexWrap==="wrap"||nodeStyle.alignSelf!==""||(parent.style.width===UNDEFINED||parent.style.height===UNDEFINED)&&(nodeStyle.position!==nodeStyle.position||nodeStyle.width!==oldNodeStyle.width||nodeStyle.height!==oldNodeStyle.height||nodeStyle.top!==oldNodeStyle.top||nodeStyle.left!==oldNodeStyle.left||nodeStyle.right!==oldNodeStyle.right||nodeStyle.bottom!==oldNodeStyle.bottom||nodeStyle.marginBottom!==oldNodeStyle.marginBottom||nodeStyle.marginTop!==oldNodeStyle.marginTop||nodeStyle.marginRight!==oldNodeStyle.marginRight||nodeStyle.marginLeft!==oldNodeStyle.marginLeft||nodeStyle.paddingBottom!==oldNodeStyle.paddingBottom||nodeStyle.paddingTop!==oldNodeStyle.paddingTop||nodeStyle.paddingRight!==oldNodeStyle.paddingRight||nodeStyle.paddingLeft!==oldNodeStyle.paddingLeft||nodeStyle.justifyContent!==oldNodeStyle.justifyContent||nodeStyle.alignItems!==oldNodeStyle.alignItems||nodeStyle.alignSelf!==oldNodeStyle.alignSelf||nodeStyle.flexGrow!==oldNodeStyle.flexGrow||nodeStyle.flexWrap!==oldNodeStyle.flexWrap))){requireStyleRecalculation=true;currentOldNode=oldParent;currentNode=parent}}currentNode.oldRef=currentOldNode;return currentNode}module.exports=requestStyleRecalculation},{"../UNDEFINED":3,"../__DEV__":4}],22:[function(require,module,exports){"use strict";var dimensions={width:window.innerWidth,height:window.innerHeight,top:window.scrollY,left:window.scrollX};var isBusy=false;var fn;var currentRAF;var ViewPortHelper={getDimensions:function(){return dimensions},onScroll:function(_fn){fn=_fn},_onScroll:function(evt){if(currentRAF){cancelAnimationFrame(currentRAF)}currentRAF=requestAnimationFrame(function(){dimensions={width:window.innerWidth,height:window.innerHeight,top:window.scrollY,left:window.scrollX};isBusy=false;if(fn){fn.call()}})}};document.addEventListener("scroll",ViewPortHelper._onScroll);module.exports=ViewPortHelper},{}],23:[function(require,module,exports){"use strict";var Shaders={VertexShader2d:"attribute vec2 a_position;"+"attribute vec4 aVertexColor;"+"uniform vec2 u_resolution;"+"varying vec4 vColor;"+"void main() {"+"  // convert the rectangle from pixels to 0.0 to 1.0"+"  vec2 zeroToOne = a_position / u_resolution;"+"  // convert from 0->1 to 0->2"+"  vec2 zeroToTwo = zeroToOne * 2.0;"+"  // convert from 0->2 to -1->+1 (clipspace)"+"  vec2 clipSpace = zeroToTwo - 1.0;"+"  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);"+"  vColor = aVertexColor;"+"}"};module.exports=Shaders},{}],24:[function(require,module,exports){"use strict";var VertexInfo={STRIDE:Float32Array.BYTES_PER_ELEMENT*3+Uint8Array.BYTES_PER_ELEMENT*4};module.exports=VertexInfo},{}],25:[function(require,module,exports){"use strict";var VertexInfo=require("./VertexInfo");function ensureViewIntegrity(element,index,verticesArray,colorsArray){}module.exports=ensureViewIntegrity},{"./VertexInfo":24}],26:[function(require,module,exports){"use strict";var CL=require("../../components/ComponentConstants");var ViewPortHelper=require("../DOM/ViewPortHelper");var viewPortDimensions=ViewPortHelper.getDimensions();var clipSpaceX=1/viewPortDimensions.width*2;var clipSpaceY=1/viewPortDimensions.height*2;var left=viewPortDimensions.left*clipSpaceX;var width=viewPortDimensions.width*clipSpaceX;var top=viewPortDimensions.top*clipSpaceY;var height=viewPortDimensions.height*clipSpaceY;function isViewVisible(element){var result=!!(element.style&&(element.style.backgroundColor||element.style.border))&&(element.layout[CL.LEFT]>=left&&element.layout[CL.LEFT]<=left+width||element.layout[CL.RIGHT]>=left&&element.layout[CL.RIGHT]<=left+width||element.layout[CL.LEFT]<left&&element.layout[CL.RIGHT]>left+width)&&(element.layout[CL.TOP]>=top&&element.layout[CL.TOP]<=top+height||element.layout[CL.BOTTOM]>=top&&element.layout[CL.BOTTOM]<=top+height||element.layout[CL.TOP]<top&&element.layout[CL.BOTTOM]>top+height);return result}module.exports=isViewVisible},{"../../components/ComponentConstants":8,"../DOM/ViewPortHelper":22}],27:[function(require,module,exports){"use strict";var gl;require("./temp-utils");var renderView=require("./renderView");var renderText=require("./renderText");var Promise=require("promise");var Shaders=require("./Shaders");var VertexInfo=require("./VertexInfo");var isViewVisible=require("./isViewVisible");function rerender(domElement,newElement,oldElement,parent,position,viewPortDimensions,top,left){return function(){render(domElement,newElement,oldElement,viewPortDimensions)}}var loadedImages={};function loadImageDirectly(src){return loadedImages[src]}function loadImage(src){return new Promise(function(resolve,reject){var image=new Image;image.onload=function image$onload(){loadedImages[src]=image;resolve(image)};image.onerror=function image$onerror(){reject(image)};image.src=src})}var existingImageTextures={};function getImageTexture(image,element){if(existingImageTextures[element.props.src]){return existingImageTextures[element.props.src]}var texture=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,texture);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,image);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST);existingImageTextures[element.props.src]=texture;return texture}function _renderImage(image,element,top,left,width,height,viewPortDimensions,parentLeft,parentWidth,parentTop,parentHeight){var texture=getImageTexture(image,element);gl.bindTexture(gl.TEXTURE_2D,texture);gl.uniform4f(image_u_dimensions,parentLeft,parentTop,parentLeft+parentWidth,parentTop+parentHeight);var dstX=left;var dstY=top;var dstWidth=width;var dstHeight=height;var clipX=dstX/gl.canvas.width*2-1;var clipY=dstY/gl.canvas.height*-2+1;var clipWidth=dstWidth/gl.canvas.width*2;var clipHeight=dstHeight/gl.canvas.height*-2;gl.uniformMatrix3fv(image_u_matrix,false,[clipWidth,0,0,0,clipHeight,0,clipX,clipY,1]);return[0,0,1,0,0,1,0,1,1,0,1,1]}function _rejectedImageLoad(){}function setLoaded(element){return function(){element.props.isLoaded=true}}function renderImage(domElement,newComponentTree,oldComponentTree,element,top,left,width,height,viewPortDimensions,parentLeft,parentWidth,parentTop,parentHeight){if(element.props&&element.props.src){if(!element.props.isLoaded){loadImage(element.props.src).then(setLoaded(element),_rejectedImageLoad).then(rerender(domElement,newComponentTree,oldComponentTree,null,0,viewPortDimensions,0,0))}else{var image=loadImageDirectly(element.props.src);_renderImage(image,element,top,left,width,height,viewPortDimensions,parentLeft,parentWidth,parentTop,parentHeight)}}}var isViewRendering=false;var isImageRendering=false;var isTextRendering=false;function switchToImageRendering(){if(!isImageRendering){isImageRendering=true;isViewRendering=false;isTextRendering=false;gl.useProgram(imageProgram);gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,true);gl.blendFunc(gl.ONE,gl.ONE_MINUS_SRC_ALPHA);gl.bindBuffer(gl.ARRAY_BUFFER,texCoordBuffer)}}var vertexShader;var vertexShader2;var fragmentShader;var imageShader;var imageProgram;var dynamicViewProgram;var staticViewProgram;var view_a_color;var view_a_position;var image_u_resolution;var view_u_resolution;var textCoord;var image_a_position;var image_u_matrix;var view_u_dimensions;var topElement;var topOldElement;var topDOMElement;var image_u_dimensions;var dynamicBuffer;var texCoordBuffer;var colorBuffer;var vertices;var dynamicIndices;var staticIndices;var indexBuffer;var colorsArray;var dynamicArrayBuffer;var staticArrayBuffer;var dynamicVertexPosition=0;var staticVertexPosition=0;var staticBuffer;function getNoVisibleDOMNodes(element,viewPortDimensions){var nrOfVisibleDOMNodes=0;if(isViewVisible(element,viewPortDimensions)){nrOfVisibleDOMNodes+=1}if(element.children){for(var i=0,l=element.children.length;i<l;i++){nrOfVisibleDOMNodes+=getNoVisibleDOMNodes(element.children[i],viewPortDimensions)}}return nrOfVisibleDOMNodes}var isBlending=false;function render(domElement,newElement,oldElement,childIndex,viewPortDimensions,isParentTransparent,isOverflow,inheritedOpacity,inheritedZoom,inheritedFontSize,inheritedColor,inheritedFilter){if(!gl){topDOMElement=domElement;gl=domElement.getContext("webgl",{depth:true,alpha:true,antialias:true});if(gl==null){gl=domElement.getContext("experimental-webgl",{depth:true,alpha:true,antialias:true})}vertexShader=createShaderFromScriptElement(gl,"2d-vertex-shader");vertexShader2=createShaderFromScriptElement(gl,"2d-vertex-shader2");fragmentShader=createShaderFromScriptElement(gl,"2d-fragment-shader");imageShader=createShaderFromScriptElement(gl,"2d-image-shader");dynamicViewProgram=createProgram(gl,[vertexShader,fragmentShader],["a_color","a_position"],[0,1]);staticViewProgram=createProgram(gl,[vertexShader,fragmentShader]);imageProgram=createProgram(gl,[vertexShader2,imageShader]);gl.deleteShader(vertexShader);gl.deleteShader(vertexShader2);gl.deleteShader(fragmentShader);gl.deleteShader(imageShader);gl.useProgram(dynamicViewProgram);dynamicBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,dynamicBuffer);view_a_position=gl.getAttribLocation(dynamicViewProgram,"a_position");view_a_color=gl.getAttribLocation(dynamicViewProgram,"a_color");staticBuffer=gl.createBuffer();gl.vertexAttribPointer(view_a_position,3,gl.FLOAT,false,VertexInfo.STRIDE,0);gl.enableVertexAttribArray(view_a_position);gl.vertexAttribPointer(view_a_color,4,gl.UNSIGNED_BYTE,true,VertexInfo.STRIDE,3*Float32Array.BYTES_PER_ELEMENT);gl.enableVertexAttribArray(view_a_color);indexBuffer=gl.createBuffer();domElement.width=viewPortDimensions.width;domElement.height=viewPortDimensions.height;console.info(gl.drawingBufferWidth);console.info(gl.drawingBufferHeight);gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight);gl.disable(gl.CULL_FACE);gl.disable(gl.STENCIL_TEST);gl.enable(gl.DEPTH_TEST);gl.depthFunc(gl.LESS);gl.enable(gl.BLEND);gl.blendFunc(gl.ONE,gl.ONE_MINUS_SRC_ALPHA);gl.blendFuncSeparate(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA,gl.ONE,gl.ONE_MINUS_SRC_ALPHA);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,indexBuffer)}if(!newElement.parent){var nrOfVertices=getNoVisibleDOMNodes(newElement,viewPortDimensions);if(!dynamicArrayBuffer||dynamicArrayBuffer.byteLength!==4*nrOfVertices*VertexInfo.STRIDE){skip=false;dynamicArrayBuffer=new ArrayBuffer(4*nrOfVertices*VertexInfo.STRIDE);vertices=new Float32Array(dynamicArrayBuffer);colorsArray=new Uint8Array(dynamicArrayBuffer);dynamicIndices=new Uint16Array(6*nrOfVertices)}dynamicVertexPosition=0}if(typeof newElement==="string"){return}if(!newElement.layout){return}if(newElement.type==="view"){dynamicVertexPosition+=renderView(vertices,dynamicIndices,dynamicVertexPosition,colorsArray,newElement,oldElement,childIndex,inheritedOpacity||1,skip);var style=newElement.style;if("opacity"in style){inheritedOpacity=(inheritedOpacity||1)*style.opacity}if(style.fontSize){inheritedFontSize=style.fontSize}if(style.zoom){inheritedZoom=(inheritedZoom||1)*style.zoom}if(style.color){inheritedColor=style.color}if(style.filter){}var children=newElement.children;var oldChildren=oldElement?oldElement.children:null;if(children){for(var i=0,l=children.length;i<l;i++){var child=children[i];render(domElement,child,oldChildren?oldChildren[i]:null,i,viewPortDimensions,isParentTransparent,newElement.style.overflow==="hidden",inheritedOpacity,inheritedZoom,inheritedFontSize,inheritedColor,inheritedFilter)}}}else if(newElement.type==="text"){}else if(newElement.type==="image"){}if(!newElement.parent){if(skip){gl.drawElements(gl.TRIANGLES,dynamicIndices.length,gl.UNSIGNED_SHORT,0)}if(!skip){gl.bufferData(gl.ARRAY_BUFFER,dynamicArrayBuffer,gl.DYNAMIC_DRAW);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,dynamicIndices,gl.STATIC_DRAW)}else{gl.bufferSubData(gl.ARRAY_BUFFER,0,dynamicArrayBuffer)}if(!skip){gl.drawElements(gl.TRIANGLES,dynamicIndices.length,gl.UNSIGNED_SHORT,0);skip=true}}}var skip=false;module.exports=render},{"./Shaders":23,"./VertexInfo":24,"./isViewVisible":26,"./renderText":28,"./renderView":29,"./temp-utils":30,promise:37}],28:[function(require,module,exports){var textCaching={};var textCanvas=document.createElement("canvas");var textCanvasCtx=textCanvas.getContext("2d");function drawTextOnCanvas(webgl,newElement,width,height,inheritedOpacity,inheritedColor){var text=newElement.children[0];var font=newElement.style.fontStyle+" "+newElement.style.fontWeight+" "+newElement.style.fontSize+"px "+newElement.style.fontFamily;var textAlign=newElement.style.textAlign;var textBaseLine="middle";var fillStyle=inheritedColor||"black";var uniqueKey=text+font+width+height+textAlign+textBaseLine+fillStyle;if(textCaching[uniqueKey]){return textCaching[uniqueKey]}textCanvasCtx.clearRect(0,0,width,height);textCanvasCtx.canvas.width=width;textCanvasCtx.canvas.height=height;textCanvasCtx.font=font;textCanvasCtx.textAlign=newElement.style.textAlign;textCanvasCtx.textBaseline=textBaseLine;textCanvasCtx.fillStyle=fillStyle;var left=0;if(textAlign==="right"){left=width}else if(textAlign==="center"){left=width/2}textCanvasCtx.fillText(text,left,newElement.style.fontSize/2);var canvas=textCanvasCtx.canvas;var texture=webgl.createTexture();webgl.bindTexture(webgl.TEXTURE_2D,texture);webgl.texParameteri(webgl.TEXTURE_2D,webgl.TEXTURE_WRAP_S,webgl.CLAMP_TO_EDGE);webgl.texParameteri(webgl.TEXTURE_2D,webgl.TEXTURE_WRAP_T,webgl.CLAMP_TO_EDGE);webgl.texParameteri(webgl.TEXTURE_2D,webgl.TEXTURE_MIN_FILTER,webgl.NEAREST);webgl.texParameteri(webgl.TEXTURE_2D,webgl.TEXTURE_MAG_FILTER,webgl.NEAREST);webgl.texImage2D(webgl.TEXTURE_2D,0,webgl.RGBA,webgl.RGBA,webgl.UNSIGNED_BYTE,textCanvas);textCaching[uniqueKey]=texture;return texture}var u_matrixLoc;function renderText(webgl,imageProgram,u_dimensions,u_matrixLoc,iTextLocation,texCoordBuffer,newElement,inheritedOpacity,inheritedColor){var layout=newElement.layout;var top=layout.top;var left=layout.left;var width=layout.width;var height=layout.height;var parent=newElement.parent;var parentLayout=parent.layout;var parentTop=parentLayout.top;var parentLeft=parentLayout.left;var parentWidth=parentLayout.width;var parentHeight=parentLayout.height;var parentRight=parentLayout.right;var parentBottom=parentLayout.bottom;webgl.useProgram(imageProgram);webgl.uniform4f(u_dimensions,parentLeft,parentTop,parentRight,parentBottom);var texture=drawTextOnCanvas(webgl,newElement,parentWidth,parentHeight,inheritedOpacity,inheritedColor);webgl.bindTexture(webgl.TEXTURE_2D,texture);var dstX=parentLeft;var dstY=parentTop;var dstWidth=parentWidth;var dstHeight=parentHeight;var clipX=dstX/webgl.canvas.width*2-1;var clipY=dstY/webgl.canvas.height*-2+1;var clipWidth=dstWidth/webgl.canvas.width*2;var clipHeight=dstHeight/webgl.canvas.height*-2;webgl.uniformMatrix3fv(u_matrixLoc,false,[clipWidth,0,0,0,clipHeight,0,clipX,clipY,1]);return[0,0,1,0,0,1,0,1,1,0,1,1]}var TextRenderer={renderText:function(){},cleanTextCaching:function(){}};module.exports=renderText},{}],29:[function(require,module,exports){"use strict";var __DEV__=require("../../__DEV__");var VertexInfo=require("./VertexInfo");var ensureViewIntegrity=require("./ensureViewIntegrity");var isViewVisible=require("./isViewVisible");var WebGLColors={black:[0,0,0],silver:[],gray:[],white:[255,255,255],maroon:[],red:[255,0,0],purple:[],fuchsia:[],green:[0,128,0],lime:[],olive:[],yellow:[],navy:[],blue:[0,0,255],teal:[],acqua:[]};function setBackgroundColor(colorsArray,index,element,inheritedOpacity){if(element.style.backgroundColor!==""){var backgroundColor=WebGLColors[element.style.backgroundColor];var opacity=1;var opacityProp=element.style.opacity;if(inheritedOpacity===1){opacity=opacityProp}else if(opacityProp===1){opacity=inheritedOpacity}else{opacity=opacityProp*inheritedOpacity}opacity=opacity*255;var colorPosition=index*VertexInfo.STRIDE*4;colorPosition+=3*Float32Array.BYTES_PER_ELEMENT;colorsArray[colorPosition+0]=backgroundColor[0];colorsArray[colorPosition+1]=backgroundColor[1];colorsArray[colorPosition+2]=backgroundColor[2];colorsArray[colorPosition+3]=opacity;colorPosition+=3*Float32Array.BYTES_PER_ELEMENT+4;colorsArray[colorPosition+0]=backgroundColor[0];colorsArray[colorPosition+1]=backgroundColor[1];colorsArray[colorPosition+2]=backgroundColor[2];colorsArray[colorPosition+3]=opacity;colorPosition+=3*Float32Array.BYTES_PER_ELEMENT+4;colorsArray[colorPosition+0]=backgroundColor[0];colorsArray[colorPosition+1]=backgroundColor[1];colorsArray[colorPosition+2]=backgroundColor[2];colorsArray[colorPosition+3]=opacity;colorPosition+=3*Float32Array.BYTES_PER_ELEMENT+4;colorsArray[colorPosition+0]=backgroundColor[0];colorsArray[colorPosition+1]=backgroundColor[1];colorsArray[colorPosition+2]=backgroundColor[2];colorsArray[colorPosition+3]=opacity}}function setBorder(element){if(element.props&&element.props.style&&element.props.style.border){console.warn("not implemented yet")}}var ViewPortHelper=require("../DOM/ViewPortHelper");var viewPortDimensions=ViewPortHelper.getDimensions();var clipSpaceX=1/viewPortDimensions.width*2;var clipSpaceY=1/viewPortDimensions.height*2;var viewPortLeft=viewPortDimensions.left*clipSpaceX;var viewPortRight=viewPortDimensions.right*clipSpaceX;var viewPortTop=viewPortDimensions.top*clipSpaceY;var viewPortBottom=viewPortDimensions.bottom*clipSpaceY;function renderView(verticesArray,indexArray,index,colorsArray,element,oldElement,childIndex,inheritedOpacity,skip){
if(isViewVisible(element)){if(element!==oldElement||!skip){var elementLayout=element.layout;var left=elementLayout[0];var right=elementLayout[2];var top=elementLayout[3];var bottom=elementLayout[5];if(left<viewPortLeft){left=viewPortLeft}if(right>viewPortRight){right=viewPortRight}if(top<viewPortTop){top=viewPortTop}if(bottom>viewPortBottom){bottom=viewPortBottom}left=left-1;right=right-1;top=(top-1)*-1;bottom=(bottom-1)*-1;var zIndex=element.depth*.1;setBackgroundColor(colorsArray,index,element,inheritedOpacity);setBorder(element);var vertexPos=index*VertexInfo.STRIDE*4/Float32Array.BYTES_PER_ELEMENT;verticesArray[vertexPos+0]=left;verticesArray[vertexPos+1]=top;verticesArray[vertexPos+2]=zIndex;vertexPos+=4;verticesArray[vertexPos+0]=right;verticesArray[vertexPos+1]=top;verticesArray[vertexPos+2]=zIndex;vertexPos+=4;verticesArray[vertexPos+0]=left;verticesArray[vertexPos+1]=bottom;verticesArray[vertexPos+2]=zIndex;vertexPos+=4;verticesArray[vertexPos+0]=right;verticesArray[vertexPos+1]=bottom;verticesArray[vertexPos+2]=zIndex;if(__DEV__){ensureViewIntegrity(element,index,verticesArray,colorsArray)}vertexPos=index*4;var indexPos;indexPos=indexArray.length-6-index*6;indexArray.set([vertexPos+0,vertexPos+1,vertexPos+2,vertexPos+2,vertexPos+1,vertexPos+3],indexPos)}return 1}return 0}module.exports=renderView},{"../../__DEV__":4,"../DOM/ViewPortHelper":22,"./VertexInfo":24,"./ensureViewIntegrity":25,"./isViewVisible":26}],30:[function(require,module,exports){(function(){var log=function(msg){if(window.console&&window.console.log){window.console.log(msg)}};var error=function(msg){if(window.console){if(window.console.error){window.console.error(msg)}else if(window.console.log){window.console.log(msg)}}};var loggingOff=function(){log=function(){};error=function(){}};var isInIFrame=function(){return window!=window.top};var glEnumToString=function(gl,value){for(var p in gl){if(gl[p]==value){return p}}return"0x"+value.toString(16)};var makeFailHTML=function(msg){return""+'<table style="background-color: #8CE; width: 100%; height: 100%;"><tr>'+'<td align="center">'+'<div style="display: table-cell; vertical-align: middle;">'+'<div style="">'+msg+"</div>"+"</div>"+"</td></tr></table>"};var GET_A_WEBGL_BROWSER=""+"This page requires a browser that supports WebGL.<br/>"+'<a href="http://get.webgl.org">Click here to upgrade your browser.</a>';var OTHER_PROBLEM=""+"It doesn't appear your computer can support WebGL.<br/>"+'<a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>';var setupWebGL=function(canvas,opt_attribs){function showLink(str){var container=canvas.parentNode;if(container){container.innerHTML=makeFailHTML(str)}}if(!window.WebGLRenderingContext){showLink(GET_A_WEBGL_BROWSER);return null}var context=create3DContext(canvas,opt_attribs);if(!context){showLink(OTHER_PROBLEM)}return context};var create3DContext=function(canvas,opt_attribs){var names=["webgl","experimental-webgl"];var context=null;for(var ii=0;ii<names.length;++ii){try{context=canvas.getContext(names[ii],opt_attribs)}catch(e){}if(context){break}}return context};var updateCSSIfInIFrame=function(){if(isInIFrame()){document.body.className="iframe"}};var getWebGLContext=function(canvas){if(isInIFrame()){updateCSSIfInIFrame();canvas.width=canvas.clientWidth;canvas.height=canvas.clientHeight}else{var title=document.getElementsByTagName("title")[0].innerText;var h1=document.createElement("h1");h1.innerText=title;document.body.insertBefore(h1,document.body.children[0])}var gl=setupWebGL(canvas);return gl};var loadShader=function(gl,shaderSource,shaderType,opt_errorCallback){var errFn=opt_errorCallback||error;var shader=gl.createShader(shaderType);gl.shaderSource(shader,shaderSource);gl.compileShader(shader);var compiled=gl.getShaderParameter(shader,gl.COMPILE_STATUS);if(!compiled){lastError=gl.getShaderInfoLog(shader);errFn("*** Error compiling shader '"+shader+"':"+lastError);gl.deleteShader(shader);return null}return shader};var loadProgram=function(gl,shaders,opt_attribs,opt_locations){var program=gl.createProgram();for(var ii=0;ii<shaders.length;++ii){gl.attachShader(program,shaders[ii])}if(opt_attribs){for(var ii=0;ii<opt_attribs.length;++ii){gl.bindAttribLocation(program,opt_locations?opt_locations[ii]:ii,opt_attribs[ii])}}gl.linkProgram(program);var linked=gl.getProgramParameter(program,gl.LINK_STATUS);if(!linked){lastError=gl.getProgramInfoLog(program);error("Error in program linking:"+lastError);gl.deleteProgram(program);return null}return program};var createShaderFromScript=function(gl,scriptId,opt_shaderType,opt_errorCallback){var shaderSource="";var shaderType;var shaderScript=document.getElementById(scriptId);if(!shaderScript){throw"*** Error: unknown script element"+scriptId}shaderSource=shaderScript.text;if(!opt_shaderType){if(shaderScript.type=="x-shader/x-vertex"){shaderType=gl.VERTEX_SHADER}else if(shaderScript.type=="x-shader/x-fragment"){shaderType=gl.FRAGMENT_SHADER}else if(shaderType!=gl.VERTEX_SHADER&&shaderType!=gl.FRAGMENT_SHADER){throw"*** Error: unknown shader type";return null}}return loadShader(gl,shaderSource,opt_shaderType?opt_shaderType:shaderType,opt_errorCallback)};this.createProgram=loadProgram;this.createShaderFromScriptElement=createShaderFromScript;this.getWebGLContext=getWebGLContext;this.updateCSSIfInIFrame=updateCSSIfInIFrame;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback,element){return window.setTimeout(callback,1e3/60)}}();window.cancelRequestAnimFrame=function(){return window.cancelCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.clearTimeout}()})()},{}],31:[function(require,module,exports){"use strict";var toFloat32=require("../utils/toFloat32");function merge(parent,child){var childKeys=Object.keys(child);for(var i=0,l=childKeys.length;i<l;i++){var childKey=childKeys[i];var value=child[childKey];parent[childKey]=!isNaN(value)?toFloat32(value):value}return parent}module.exports=merge},{"../utils/toFloat32":33}],32:[function(require,module,exports){"use strict";var keys=Object.keys;function shallowClone(node){var newNode={};var parameters=keys(node);for(var i=0,l=parameters.length;i<l;i++){var parameter=parameters[i];newNode[parameter]=node[parameter]}return newNode}module.exports=shallowClone},{}],33:[function(require,module,exports){var helperArray=new Float32Array(1);module.exports=function(nr){helperArray[0]=+nr;return helperArray[0]}},{}],34:[function(require,module,exports){module.exports=function(){var events=require("events");var domain={};domain.createDomain=domain.create=function(){var d=new events.EventEmitter;function emitError(e){d.emit("error",e)}d.add=function(emitter){emitter.on("error",emitError)};d.remove=function(emitter){emitter.removeListener("error",emitError)};d.bind=function(fn){return function(){var args=Array.prototype.slice.call(arguments);try{fn.apply(null,args)}catch(err){emitError(err)}}};d.intercept=function(fn){return function(err){if(err){emitError(err)}else{var args=Array.prototype.slice.call(arguments,1);try{fn.apply(null,args)}catch(err){emitError(err)}}}};d.run=function(fn){try{fn()}catch(err){emitError(err)}return this};d.dispose=function(){this.removeAllListeners();return this};d.enter=d.exit=function(){return this};return d};return domain}.call(this)},{events:35}],35:[function(require,module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}throw TypeError('Uncaught, unspecified "error" event.')}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];handler.apply(this,args)}}else if(isObject(handler)){len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){var m;if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-->0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else{while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.listenerCount=function(emitter,type){var ret;if(!emitter._events||!emitter._events[type])ret=0;else if(isFunction(emitter._events[type]))ret=1;else ret=emitter._events[type].length;return ret};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}],36:[function(require,module,exports){var process=module.exports={};var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=setTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){currentQueue[queueIndex].run()}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;clearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){setTimeout(drainQueue,0)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],37:[function(require,module,exports){"use strict";module.exports=require("./lib")},{"./lib":42}],38:[function(require,module,exports){"use strict";var asap=require("asap/raw");function noop(){}var LAST_ERROR=null;var IS_ERROR={};function getThen(obj){try{return obj.then}catch(ex){LAST_ERROR=ex;return IS_ERROR}}function tryCallOne(fn,a){try{return fn(a)}catch(ex){LAST_ERROR=ex;return IS_ERROR}}function tryCallTwo(fn,a,b){try{fn(a,b)}catch(ex){LAST_ERROR=ex;return IS_ERROR}}module.exports=Promise;function Promise(fn){if(typeof this!=="object"){throw new TypeError("Promises must be constructed via new")}if(typeof fn!=="function"){throw new TypeError("not a function")}this._37=0;this._12=null;this._59=[];if(fn===noop)return;doResolve(fn,this)}Promise._99=noop;Promise.prototype.then=function(onFulfilled,onRejected){if(this.constructor!==Promise){return safeThen(this,onFulfilled,onRejected)}var res=new Promise(noop);handle(this,new Handler(onFulfilled,onRejected,res));return res};function safeThen(self,onFulfilled,onRejected){return new self.constructor(function(resolve,reject){var res=new Promise(noop);res.then(resolve,reject);handle(self,new Handler(onFulfilled,onRejected,res))})}function handle(self,deferred){while(self._37===3){self=self._12}if(self._37===0){self._59.push(deferred);return}asap(function(){var cb=self._37===1?deferred.onFulfilled:deferred.onRejected;if(cb===null){if(self._37===1){resolve(deferred.promise,self._12)}else{reject(deferred.promise,self._12)}return}var ret=tryCallOne(cb,self._12);if(ret===IS_ERROR){reject(deferred.promise,LAST_ERROR)}else{resolve(deferred.promise,ret)}})}function resolve(self,newValue){if(newValue===self){return reject(self,new TypeError("A promise cannot be resolved with itself."))}if(newValue&&(typeof newValue==="object"||typeof newValue==="function")){var then=getThen(newValue);if(then===IS_ERROR){return reject(self,LAST_ERROR)}if(then===self.then&&newValue instanceof Promise){self._37=3;self._12=newValue;finale(self);return}else if(typeof then==="function"){doResolve(then.bind(newValue),self);return}}self._37=1;self._12=newValue;finale(self)}function reject(self,newValue){self._37=2;self._12=newValue;finale(self)}function finale(self){for(var i=0;i<self._59.length;i++){handle(self,self._59[i])}self._59=null}function Handler(onFulfilled,onRejected,promise){this.onFulfilled=typeof onFulfilled==="function"?onFulfilled:null;this.onRejected=typeof onRejected==="function"?onRejected:null;this.promise=promise}function doResolve(fn,promise){var done=false;var res=tryCallTwo(fn,function(value){if(done)return;done=true;resolve(promise,value)},function(reason){if(done)return;done=true;reject(promise,reason)});if(!done&&res===IS_ERROR){done=true;reject(promise,LAST_ERROR)}}},{"asap/raw":46}],39:[function(require,module,exports){"use strict";var Promise=require("./core.js");module.exports=Promise;Promise.prototype.done=function(onFulfilled,onRejected){var self=arguments.length?this.then.apply(this,arguments):this;self.then(null,function(err){setTimeout(function(){throw err},0)})}},{"./core.js":38}],40:[function(require,module,exports){"use strict";var Promise=require("./core.js");module.exports=Promise;var TRUE=valuePromise(true);var FALSE=valuePromise(false);var NULL=valuePromise(null);var UNDEFINED=valuePromise(undefined);var ZERO=valuePromise(0);var EMPTYSTRING=valuePromise("");function valuePromise(value){var p=new Promise(Promise._99);p._37=1;p._12=value;return p}Promise.resolve=function(value){if(value instanceof Promise)return value;if(value===null)return NULL;if(value===undefined)return UNDEFINED;if(value===true)return TRUE;if(value===false)return FALSE;if(value===0)return ZERO;if(value==="")return EMPTYSTRING;if(typeof value==="object"||typeof value==="function"){try{var then=value.then;if(typeof then==="function"){return new Promise(then.bind(value))}}catch(ex){return new Promise(function(resolve,reject){reject(ex)})}}return valuePromise(value)};Promise.all=function(arr){var args=Array.prototype.slice.call(arr);return new Promise(function(resolve,reject){if(args.length===0)return resolve([]);var remaining=args.length;function res(i,val){if(val&&(typeof val==="object"||typeof val==="function")){if(val instanceof Promise&&val.then===Promise.prototype.then){while(val._37===3){val=val._12}if(val._37===1)return res(i,val._12);if(val._37===2)reject(val._12);val.then(function(val){res(i,val)},reject);return}else{var then=val.then;if(typeof then==="function"){var p=new Promise(then.bind(val));p.then(function(val){res(i,val)},reject);return}}}args[i]=val;if(--remaining===0){resolve(args)}}for(var i=0;i<args.length;i++){res(i,args[i])}})};Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value)})};Promise.race=function(values){return new Promise(function(resolve,reject){values.forEach(function(value){Promise.resolve(value).then(resolve,reject)})})};Promise.prototype["catch"]=function(onRejected){return this.then(null,onRejected)}},{"./core.js":38}],41:[function(require,module,exports){"use strict";var Promise=require("./core.js");module.exports=Promise;Promise.prototype["finally"]=function(f){return this.then(function(value){return Promise.resolve(f()).then(function(){return value})},function(err){return Promise.resolve(f()).then(function(){throw err})})}},{"./core.js":38}],42:[function(require,module,exports){"use strict";module.exports=require("./core.js");require("./done.js");require("./finally.js");require("./es6-extensions.js");require("./node-extensions.js")},{"./core.js":38,"./done.js":39,"./es6-extensions.js":40,"./finally.js":41,"./node-extensions.js":43}],43:[function(require,module,exports){"use strict";var Promise=require("./core.js");var asap=require("asap");module.exports=Promise;Promise.denodeify=function(fn,argumentCount){argumentCount=argumentCount||Infinity;return function(){var self=this;var args=Array.prototype.slice.call(arguments,0,argumentCount>0?argumentCount:0);return new Promise(function(resolve,reject){args.push(function(err,res){if(err)reject(err);else resolve(res)});var res=fn.apply(self,args);if(res&&(typeof res==="object"||typeof res==="function")&&typeof res.then==="function"){resolve(res)}})}};Promise.nodeify=function(fn){return function(){var args=Array.prototype.slice.call(arguments);var callback=typeof args[args.length-1]==="function"?args.pop():null;var ctx=this;try{return fn.apply(this,arguments).nodeify(callback,ctx)}catch(ex){if(callback===null||typeof callback=="undefined"){return new Promise(function(resolve,reject){reject(ex)})}else{asap(function(){callback.call(ctx,ex)})}}}};Promise.prototype.nodeify=function(callback,ctx){if(typeof callback!="function")return this;this.then(function(value){asap(function(){callback.call(ctx,null,value)})},function(err){asap(function(){callback.call(ctx,err)})})}},{"./core.js":38,asap:44}],44:[function(require,module,exports){"use strict";var rawAsap=require("./raw");var freeTasks=[];var pendingErrors=[];var requestErrorThrow=rawAsap.makeRequestCallFromTimer(throwFirstError);function throwFirstError(){if(pendingErrors.length){throw pendingErrors.shift()}}module.exports=asap;function asap(task){var rawTask;if(freeTasks.length){rawTask=freeTasks.pop()}else{rawTask=new RawTask}rawTask.task=task;rawAsap(rawTask)}function RawTask(){this.task=null}RawTask.prototype.call=function(){try{this.task.call()}catch(error){if(asap.onerror){asap.onerror(error)}else{pendingErrors.push(error);requestErrorThrow()}}finally{this.task=null;freeTasks[freeTasks.length]=this}}},{"./raw":45}],45:[function(require,module,exports){(function(global){"use strict";module.exports=rawAsap;function rawAsap(task){if(!queue.length){requestFlush();flushing=true}queue[queue.length]=task}var queue=[];var flushing=false;var requestFlush;var index=0;var capacity=1024;function flush(){while(index<queue.length){var currentIndex=index;index=index+1;queue[currentIndex].call();if(index>capacity){for(var scan=0,newLength=queue.length-index;scan<newLength;scan++){queue[scan]=queue[scan+index]}queue.length-=index;index=0}}queue.length=0;index=0;flushing=false}var BrowserMutationObserver=global.MutationObserver||global.WebKitMutationObserver;if(typeof BrowserMutationObserver==="function"){requestFlush=makeRequestCallFromMutationObserver(flush)}else{requestFlush=makeRequestCallFromTimer(flush)}rawAsap.requestFlush=requestFlush;function makeRequestCallFromMutationObserver(callback){var toggle=1;var observer=new BrowserMutationObserver(callback);var node=document.createTextNode("");observer.observe(node,{characterData:true});return function requestCall(){toggle=-toggle;node.data=toggle}}function makeRequestCallFromTimer(callback){return function requestCall(){var timeoutHandle=setTimeout(handleTimer,0);var intervalHandle=setInterval(handleTimer,50);function handleTimer(){clearTimeout(timeoutHandle);clearInterval(intervalHandle);callback()}}}rawAsap.makeRequestCallFromTimer=makeRequestCallFromTimer}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],46:[function(require,module,exports){(function(process){"use strict";var domain;var hasSetImmediate=typeof setImmediate==="function";module.exports=rawAsap;function rawAsap(task){if(!queue.length){requestFlush();flushing=true}queue[queue.length]=task}var queue=[];var flushing=false;var index=0;var capacity=1024;function flush(){while(index<queue.length){var currentIndex=index;index=index+1;queue[currentIndex].call();if(index>capacity){for(var scan=0,newLength=queue.length-index;scan<newLength;scan++){queue[scan]=queue[scan+index]}queue.length-=index;index=0}}queue.length=0;index=0;flushing=false}rawAsap.requestFlush=requestFlush;function requestFlush(){var parentDomain=process.domain;if(parentDomain){if(!domain){domain=require("domain")}domain.active=process.domain=null}if(flushing&&hasSetImmediate){setImmediate(flush)}else{process.nextTick(flush)}if(parentDomain){domain.active=process.domain=parentDomain}}}).call(this,require("_process"))},{_process:36,domain:34}]},{},[2]);